<!DOCTYPE html>
<html>
<head>
    <title>Smart Mess - Student</title>
    <link rel="stylesheet" href="style.css">
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getFirestore, doc, setDoc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyBc2ONAvV6hti6j8zkU87C18lAzMWXEeMQ",
            authDomain: "smart-mess-hackathon.firebaseapp.com",
            projectId: "smart-mess-hackathon",
            storageBucket: "smart-mess-hackathon.firebasestorage.app",
            messagingSenderId: "1058173514798",
            appId: "1:1058173514798:web:e5309c7137fdb5d67b9bbf"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        window.submitChoice = async (choice) => {
            const studentId = document.getElementById('studentId').value;
            if(!studentId) { alert("Please enter your ID/Name"); return; }
            
            try {
                await setDoc(doc(db, "daily_meals", studentId), {
                    name: studentId,
                    eating: choice,
                    timestamp: new Date()
                });
                alert("Choice saved: " + (choice ? "Eating" : "Skipping"));
            } catch (e) {
                console.error("Error adding document: ", e);
                alert("Error saving choice");
            }
        }
    </script>
</head>
<body>
    <div class="container">
        <h1>üç± Smart Mess</h1>
        <p>Are you eating dinner tonight?</p>
        
        <input type="text" id="studentId" placeholder="Enter Name or Roll No.">
        
        <button class="btn-eat" onclick="submitChoice(true)">‚úÖ Yes, I'm Eating</button>
        <button class="btn-skip" onclick="submitChoice(false)">‚ùå No, I'm Skipping</button>
    </div>
</body>
</html>